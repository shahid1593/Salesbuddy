<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SBI Super Health Insurance Calculator</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.29/jspdf.plugin.autotable.min.js"></script>
    <style>
        :root {
            --primary: #280071;
            --secondary: #0091d0;
            --light-bg: #f8f9fa;
            --border: #dee2e6;
            --active-pill: #0091d0;
            --inactive-pill: #e9ecef;
            --discount-green: #2ecc71;
            --whatsapp: #25D366;
        }

        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: #e9ecef;
            margin: 0;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background-color: var(--primary);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .header h1 { margin: 0; font-size: 24px; }

        .content { padding: 30px; }

        .form-group { margin-bottom: 20px; }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            font-size: 14px;
            color: #444;
        }

        .pill-container {
            display: flex;
            background-color: var(--inactive-pill);
            border-radius: 25px;
            padding: 5px;
            width: fit-content;
            margin-bottom: 10px;
        }

        .pill-option {
            padding: 10px 25px;
            cursor: pointer;
            border-radius: 20px;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.3s ease;
            color: #666;
        }

        .pill-option.active {
            background-color: var(--active-pill);
            color: white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        select, input[type="number"] {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 15px;
            box-sizing: border-box;
            transition: border-color 0.3s;
        }

        select:focus, input:focus {
            border-color: var(--secondary);
            outline: none;
        }

        .btn-calc {
            background-color: var(--secondary);
            color: white;
            border: none;
            padding: 15px;
            width: 100%;
            font-size: 18px;
            font-weight: bold;
            border-radius: 8px;
            cursor: pointer;
            margin-top: 10px;
            transition: background 0.2s;
        }

        .btn-calc:hover { background-color: #007bb5; }

        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .btn-download, .btn-whatsapp {
            flex: 1;
            border: none;
            padding: 12px;
            font-size: 16px;
            font-weight: bold;
            border-radius: 8px;
            cursor: pointer;
            color: white;
            display: none;
            align-items: center;
            justify-content: center;
        }

        .btn-download { background-color: #28a745; }
        .btn-download:hover { background-color: #218838; }

        .btn-whatsapp { background-color: var(--whatsapp); }
        .btn-whatsapp:hover { background-color: #128C7E; }

        #resultArea {
            margin-top: 40px;
            display: none;
        }

        .comparison-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
        }

        .plan-card {
            background: #fff;
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 0;
            text-align: center;
            transition: transform 0.2s;
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .plan-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-color: var(--secondary);
        }

        .plan-header {
            font-size: 18px;
            font-weight: bold;
            color: white;
            background: var(--primary);
            padding: 15px;
            margin-bottom: 0;
        }

        .card-body {
            padding: 15px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            text-align: left;
        }

        /* Detailed Breakdown Styles */
        .breakdown-table {
            width: 100%;
            font-size: 12px;
            margin-bottom: 15px;
            border-collapse: collapse;
        }
        
        .breakdown-table tr {
            border-bottom: 1px solid #eee;
        }

        .breakdown-table td {
            padding: 5px 2px;
        }

        .bd-label { color: #666; }
        .bd-val { text-align: right; font-weight: 600; color: #333; }
        
        .bd-main-row td {
            font-weight: bold;
            color: var(--primary);
            background-color: #f8f9fa;
        }

        .bd-sub-row td {
            padding-left: 10px;
            color: #777;
            font-size: 11px;
            font-family: monospace;
        }
        
        .bd-opt-row td {
            color: #2c3e50;
            font-style: italic;
        }

        .bd-discount-row td {
            color: var(--discount-green);
            font-weight: bold;
        }

        .final-price-container {
            margin-top: auto;
            text-align: center;
            padding-top: 10px;
            border-top: 2px dashed #eee;
        }

        .final-price {
            font-size: 24px;
            font-weight: 800;
            color: var(--primary);
        }

        .opt-section {
            border-top: 1px dashed #ccc;
            padding-top: 20px;
            margin-top: 20px;
        }
        
        .checkbox-label {
            display: flex;
            align-items: center;
            font-weight: normal;
            cursor: pointer;
            margin-bottom: 8px;
        }
        .checkbox-label input {
            margin-right: 10px;
            width: 18px;
            height: 18px;
        }
        .checkbox-label.disabled {
            color: #aaa;
            cursor: not-allowed;
        }

        /* Member selection styles */
        .member-select-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 5px;
            margin-left: 28px;
            margin-bottom: 15px;
            background: #fff;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #eee;
        }

        .member-item {
            font-size: 13px;
            color: #555;
            display: flex;
            align-items: center;
        }

        .member-item input {
            width: 14px;
            height: 14px;
            margin-right: 5px;
        }

        .error-msg {
            color: #dc3545;
            font-size: 14px;
            margin-top: 5px;
            display: none;
            background: #ffe6e6;
            padding: 10px;
            border-radius: 5px;
        }

        .note {
            font-size: 12px;
            color: #666;
            margin-top: 10px;
            text-align: center;
            font-style: italic;
        }
        
        .opt-note {
            margin-left: 28px;
            font-size: 12px;
            color: #e74c3c;
            display: none;
            margin-bottom: 5px;
        }

        @media (max-width: 768px) {
            .comparison-container { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h1>Super Health Insurance Calculator</h1>
    </div>

    <div class="content">
        <form id="calcForm">
            <div class="form-group">
                <label>Plan Variant</label>
                <select id="variant" onchange="handleVariantChange()">
                    <option value="Prime" selected>Prime</option>
                    <option value="Elite">Elite</option>
                    <option value="Premier">Premier</option>
                    <option value="Platinum">Platinum</option>
                    <option value="PlatinumInfinite">Platinum Infinite</option>
                </select>
            </div>

            <div class="form-group">
                <label>Policy Type</label>
                <div class="pill-container">
                    <div class="pill-option active" id="pill-individual" onclick="setPolicyType('individual')">Individual</div>
                    <div class="pill-option" id="pill-floater" onclick="setPolicyType('floater')">Family Floater</div>
                </div>
                <input type="hidden" id="policyType" value="individual">
            </div>

            <div class="form-group">
                <label>Family Combination</label>
                <select id="family" onchange="handleFamilyChange()">
                    </select>
            </div>

            <div class="form-group">
                <label id="ageLabel">Age of Eldest Member (Years)</label>
                <input type="number" id="age" min="18" max="99" placeholder="e.g. 35" required>
            </div>

            <div class="form-group">
                <label>Sum Insured (INR)</label>
                <select id="sumInsured">
                    </select>
            </div>

            <div class="opt-section">
                <label style="color: var(--secondary);">Optional Benefits</label>
                
                <label class="checkbox-label">
                    <input type="checkbox" id="opt_domestic"> Domestic Help / Staff Cover
                </label>
                <div id="domestic_inputs" style="display:none; margin-left: 28px; margin-bottom: 10px;">
                    <input type="number" id="staff_age" placeholder="Staff Age (18-65)" style="width: 150px; padding: 5px; margin-bottom: 5px;">
                    <select id="staff_si" style="width: 150px; padding: 5px;">
                        <option value="50000">50k SI</option>
                        <option value="100000">1L SI</option>
                    </select>
                </div>

                <label class="checkbox-label" id="lbl_reinsure">
                    <input type="checkbox" id="opt_reinsure"> Enhanced ReInsure Benefit
                </label>
                <div id="reinsure_note" class="opt-note">Not applicable for Platinum Infinite</div>
                
                <label class="checkbox-label" id="lbl_bonus">
                    <input type="checkbox" id="opt_bonus"> Enhanced Cumulative Bonus Safeguard
                </label>
                <div id="bonus_note" class="opt-note">Not applicable for Platinum Infinite</div>

                <label class="checkbox-label">
                    <input type="checkbox" id="opt_accident"> Additional Accidental Sum Insured
                </label>

                <label class="checkbox-label" id="lbl_wellness">
                    <input type="checkbox" id="opt_wellness"> Wellness Benefit (Gym Membership)
                </label>
                <div id="wellness_members_container" style="display:none;">
                    <div style="margin-left:28px; font-size:12px; color:#666; margin-bottom:5px;">Select members to enroll:</div>
                    <div class="member-select-grid" id="wellness_inputs">
                        </div>
                </div>

                <label class="checkbox-label" id="lbl_walk">
                    <input type="checkbox" id="opt_walk"> Walk Healthy Benefit
                </label>
                <div id="walk_note" class="opt-note" style="display:none;"></div>
            </div>

            <button type="button" class="btn-calc" onclick="calculate()">Calculate Premium</button>
            <div id="errorBox" class="error-msg"></div>
        </form>

        <div id="resultArea">
            <h3 style="text-align: center; color: var(--primary);">Detailed Premium Breakdown (Excl. Tax)</h3>
            <div class="comparison-container">
                
                <div class="plan-card">
                    <div class="plan-header">1 Year Policy</div>
                    <div class="card-body">
                        <div id="breakdown_1"></div>
                        <div class="final-price-container">
                            <div style="font-size:12px; color:#666;">Final Premium</div>
                            <div class="final-price" id="total_1">₹ 0</div>
                        </div>
                    </div>
                </div>
                
                <div class="plan-card">
                    <div class="plan-header" style="background: var(--secondary);">2 Year Policy</div>
                    <div class="card-body">
                        <div id="breakdown_2"></div>
                        <div class="final-price-container">
                            <div style="font-size:12px; color:#666;">Final Premium</div>
                            <div class="final-price" id="total_2">₹ 0</div>
                        </div>
                    </div>
                </div>

                <div class="plan-card">
                    <div class="plan-header">3 Year Policy</div>
                    <div class="card-body">
                        <div id="breakdown_3"></div>
                        <div class="final-price-container">
                            <div style="font-size:12px; color:#666;">Final Premium</div>
                            <div class="final-price" id="total_3">₹ 0</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="action-buttons">
                <button class="btn-download" id="btnDownload" onclick="generateAndAction('download')">Download Quote (PDF)</button>
                <button class="btn-whatsapp" id="btnWhatsapp" onclick="generateAndAction('whatsapp')">Share on WhatsApp</button>
            </div>
            <div class="note" id="calcNote"></div>
        </div>
    </div>
</div>

<script>
    // --- DATABASE (Base Rates) ---
    // (Same base DB logic)
    const db = {
        "Prime": { "SI": [500000, 700000, 1000000, 1500000, 2000000, 2500000], "rates": { "1A": { "18-35": [7904, 8790, 9313, 10378, 11437, 12398], "36-45": [9242, 10285, 10904, 12122, 13348, 14462], "46-50": [13349, 14706, 15635, 16994, 18684, 20404], "51-55": [17158, 18959, 20161, 21957, 24124, 26279], "56-60": [22799, 25188, 26572, 29127, 31925, 34477], "61-65": [29481, 32649, 34512, 37960, 41594, 44911], "66-70": [38332, 42530, 45028, 49491, 54232, 58563], "71-75": [50053, 55617, 58956, 64764, 70972, 76644], "76-80": [65578, 72950, 77403, 84992, 93142, 100592], "81-85": [86140, 95907, 101835, 111783, 122506, 132310], "85+": [113373, 126312, 134194, 147266, 161396, 174318] }, "1A1C": { "18-35": [11417, 12788, 13628, 15319, 16911, 18355], "36-45": [12622, 14133, 15060, 16888, 18632, 20214], "46-50": [16357, 18141, 19351, 21277, 23438, 25583], "51-55": [22422, 24896, 26532, 29137, 32040, 34863], "56-60": [27559, 30562, 32342, 35650, 39120, 42283], "61-65": [33573, 37276, 39488, 43612, 47835, 51686], "66-70": [41538, 46169, 48953, 53990, 59210, 63973], "71-75": [52833, 58783, 62380, 68757, 75399, 81460], "76-80": [70079, 78051, 82898, 91463, 100299, 108361], "81-85": [92244, 102809, 109257, 120578, 132224, 142847], "85+": [120222, 134052, 142515, 157199, 172370, 186213] }, "1A2C": { "18-35": [15500, 17430, 18636, 21037, 23245, 25246], "36-45": [16691, 18760, 20051, 22589, 24946, 27083], "46-50": [20390, 22727, 24298, 26930, 29700, 32395], "51-55": [28998, 32305, 34475, 38062, 41874, 45523], "56-60": [34085, 37915, 40225, 44508, 48883, 52865], "61-65": [40032, 44555, 47292, 52384, 57502, 62165], "66-70": [47908, 53349, 56651, 62646, 68750, 74315], "71-75": [58341, 64996, 69047, 76239, 83648, 90408], "76-80": [72158, 80423, 85465, 94242, 103380, 111721], "81-85": [93125, 103843, 110401, 121743, 133534, 144296], "85+": [121266, 135275, 143863, 158637, 173985, 187993] }, "1A3C": { "18-35": [19492, 21968, 23530, 26627, 29435, 31980], "36-45": [20670, 23283, 24930, 28161, 31118, 33797], "46-50": [24331, 27208, 29132, 32453, 35818, 39051], "51-55": [35427, 39548, 42239, 46785, 51486, 55942], "56-60": [40463, 45101, 47930, 53166, 58422, 63206], "61-65": [46343, 51667, 54917, 60954, 66946, 72403], "66-70": [54132, 60362, 64171, 71101, 78068, 84416], "71-75": [64447, 71879, 76428, 84541, 92798, 100328], "76-80": [78108, 87132, 92661, 102342, 112308, 121402], "81-85": [96203, 107334, 114161, 125918, 138148, 149313], "85+": [121860, 135986, 144661, 159453, 174911, 189026] }, "2A": { "18-35": [11555, 12887, 13696, 15325, 16941, 18392], "36-45": [13509, 15069, 16018, 17831, 19621, 21248], "46-50": [19322, 21396, 22958, 24926, 27394, 30002], "51-55": [24883, 27605, 29566, 32173, 35336, 38581], "56-60": [33441, 37021, 39149, 42962, 47047, 50774], "61-65": [43197, 47914, 50742, 55927, 61232, 66076], "66-70": [56119, 62340, 66095, 72762, 79685, 86008], "71-75": [73232, 81447, 86430, 95060, 104124, 112406], "76-80": [95898, 106753, 113362, 124593, 136493, 147370], "81-85": [125919, 140271, 149033, 163708, 179363, 193678], "85+": [165679, 184662, 196278, 215514, 236144, 255010] }, "2A1C": { "18-35": [14833, 16612, 17711, 19869, 21905, 23752], "36-45": [16761, 18764, 20002, 22381, 24658, 26726], "46-50": [22499, 25007, 26853, 29379, 32324, 35365], "51-55": [30121, 33501, 35884, 39268, 43150, 47047], "56-60": [38578, 42805, 45347, 49926, 54717, 59085], "61-65": [48201, 53548, 56781, 62716, 68711, 74181], "66-70": [60945, 67777, 71924, 79322, 86911, 93839], "71-75": [77824, 86622, 91980, 101314, 111016, 119876], "76-80": [100180, 111582, 118544, 130442, 142941, 154361], "81-85": [129789, 144640, 153726, 169021, 185224, 200034], "85+": [169005, 188423, 200323, 220117, 241227, 260527] }, "2A2C": { "18-35": [18020, 20231, 21614, 24324, 26837, 29115], "36-45": [19921, 22354, 23873, 26801, 29551, 32047], "46-50": [25585, 28515, 30636, 33702, 37112, 40572], "51-55": [35212, 39231, 42023, 46162, 50741, 55272], "56-60": [43568, 48422, 51367, 56689, 62165, 67154], "61-65": [53057, 59016, 62641, 69305, 75968, 82044], "66-70": [65624, 73047, 77574, 85679, 93915, 101429], "71-75": [82269, 91630, 97352, 107366, 117684, 127105], "76-80": [104314, 116243, 123546, 136090, 149166, 161110], "81-85": [133512, 148842, 158240, 174133, 190863, 206149], "85+": [172183, 192018, 204190, 224519, 246087, 265801] }, "2A3C": { "18-35": [21115, 23747, 25404, 28650, 31625, 34321], "36-45": [22989, 25839, 27631, 31091, 34301, 37212], "46-50": [28579, 31917, 34306, 37896, 41756, 45622], "51-55": [40156, 44794, 47983, 52854, 58110, 63255], "56-60": [48411, 53872, 57207, 63249, 69389, 74981], "61-65": [57766, 64317, 68323, 75691, 83002, 89665], "66-70": [70157, 78151, 83045, 91835, 100696, 108777], "71-75": [86567, 96472, 102544, 113217, 124131, 134091], "76-80": [108302, 120739, 128370, 141536, 155169, 167618], "81-85": [137088, 152878, 162575, 179043, 196278, 212022], "85+": [175215, 195446, 207878, 228720, 250725, 270834] } } }, 
        "Elite": { "SI": [500000, 700000, 1000000, 1500000, 2000000, 2500000], "rates": { "1A": { "18-35": [8214, 9138, 9685, 10835, 11940, 12941], "36-45": [10560, 11763, 12485, 14066, 15489, 16774], "46-50": [16222, 17930, 19083, 21232, 23352, 25446], "51-55": [20821, 23069, 24557, 27360, 30074, 32707], "56-60": [27448, 30404, 32150, 35984, 39477, 42635], "61-65": [38186, 42415, 44956, 50798, 55734, 60186], "66-70": [54000, 60109, 63828, 72600, 79685, 86057], "71-75": [76690, 85501, 90917, 104049, 114242, 123383], "76-80": [105533, 117777, 125344, 143920, 158047, 170701], "81-85": [136084, 151940, 161761, 185443, 203637, 219945], "85+": [170809, 190751, 203110, 231975, 254697, 275099] }, "1A1C": { "18-35": [11779, 13195, 14064, 15853, 17500, 18992], "36-45": [13891, 15557, 16583, 18761, 20694, 22441], "46-50": [19027, 21136, 22554, 25214, 27775, 30267], "51-55": [25998, 28908, 30822, 34411, 37849, 41138], "56-60": [32022, 35569, 37698, 42232, 46371, 50114], "61-65": [41686, 46379, 49223, 55578, 61015, 65922], "66-70": [55919, 62304, 66208, 75200, 82571, 89206], "71-75": [77085, 85992, 91479, 104526, 114795, 124015], "76-80": [106318, 118708, 126380, 144910, 159167, 171948], "81-85": [137473, 153552, 163526, 187284, 205695, 222209], "85+": [172193, 192360, 204874, 233849, 256794, 277405] }, "1A2C": { "18-35": [15941, 17925, 19165, 21688, 23962, 26020], "36-45": [18030, 20262, 21657, 24563, 27120, 29431], "46-50": [23113, 25782, 27565, 30946, 34123, 37173], "51-55": [32810, 36582, 39048, 43684, 48066, 52212], "56-60": [38774, 43176, 45852, 51425, 56500, 61094], "61-65": [48331, 53866, 57250, 64623, 70983, 76727], "66-70": [62405, 69613, 74046, 84027, 92300, 99753], "71-75": [82599, 92212, 98154, 112017, 123055, 132973], "76-80": [108270, 120938, 128795, 147502, 162042, 175086], "81-85": [138127, 154332, 164397, 188114, 206637, 223260], "85+": [172936, 193244, 205860, 234842, 257919, 278656] }, "1A3C": { "18-35": [20010, 22550, 24152, 27391, 30277, 32889], "36-45": [22075, 24860, 26616, 30233, 33400, 36262], "46-50": [27105, 30321, 32461, 36545, 40324, 43919], "51-55": [39469, 44083, 47088, 52746, 58051, 63034], "56-60": [45373, 50609, 53820, 60406, 66397, 71820], "61-65": [54822, 61179, 65090, 73458, 80719, 87280], "66-70": [68738, 76750, 81697, 92644, 101796, 110046], "71-75": [88705, 99095, 105535, 120319, 132205, 142894], "76-80": [114087, 127497, 135831, 155405, 170754, 184533], "81-85": [140972, 157561, 167878, 191945, 210873, 227868], "85+": [173221, 193610, 206288, 235204, 258346, 279149] }, "2A": { "18-35": [12007, 13395, 14239, 15952, 17565, 19028], "36-45": [15433, 17227, 18326, 20669, 22746, 24624], "46-50": [23517, 26103, 27992, 31114, 34209, 37363], "51-55": [30231, 33606, 35983, 40060, 44024, 47965], "56-60": [40229, 44637, 47294, 52973, 58074, 62684], "61-65": [55906, 62172, 65991, 74671, 81877, 88376], "66-70": [78995, 88006, 93544, 106502, 116846, 126148], "71-75": [112122, 125079, 133093, 152417, 167298, 180645], "76-80": [154233, 172201, 183357, 210628, 231254, 249728], "81-85": [198837, 222079, 236526, 271252, 297815, 321625], "85+": [249535, 278743, 296895, 339189, 372363, 402150] }, "2A1C": { "18-35": [15346, 17187, 18327, 20626, 22739, 24653], "36-45": [18725, 20967, 22359, 25278, 27849, 30173], "46-50": [26704, 29725, 31898, 35580, 39155, 42743], "51-55": [35619, 39670, 42481, 47377, 52081, 56695], "56-60": [45496, 50566, 53648, 60129, 65955, 71224], "61-65": [60959, 67862, 72089, 81533, 89436, 96567], "66-70": [83731, 93341, 99264, 112928, 123926, 133822], "71-75": [116404, 129906, 138272, 158214, 173687, 187572], "76-80": [157939, 176383, 187847, 215628, 236767, 255709], "81-85": [201932, 225578, 240288, 275421, 302416, 326621], "85+": [251935, 281465, 299830, 342428, 375943, 406043] }, "2A2C": { "18-35": [18592, 20873, 22301, 25168, 27766, 30119], "36-45": [21924, 24601, 26276, 29755, 32805, 35562], "46-50": [25585, 28515, 30636, 33702, 37112, 40572], "51-55": [40854, 45561, 48792, 54483, 59906, 65172], "56-60": [50610, 56322, 59816, 67074, 73604, 79510], "61-65": [65858, 73377, 78001, 88184, 96762, 104505], "66-70": [88314, 98503, 104799, 119143, 130773, 141242], "71-75": [120533, 134560, 143264, 151556, 168062, 184568], "76-80": [161491, 180391, 192151, 220417, 242046, 261436], "81-85": [133512, 148842, 158240, 174133, 190863, 206149], "85+": [172183, 192018, 204190, 224519, 246087, 265801] }, "2A3C": { "18-35": [21745, 24453, 26159, 29578, 32647, 35425], "36-45": [25029, 28128, 30078, 34100, 37615, 40792], "46-50": [32798, 36650, 39367, 44117, 48608, 53024], "51-55": [45935, 51278, 54918, 61378, 67498, 73396], "56-60": [55571, 61905, 65798, 73809, 81020, 87544], "61-65": [70604, 78720, 83726, 94625, 103856, 112190], "66-70": [92744, 103492, 110147, 125148, 137387, 148410], "71-75": [124509, 139041, 148071, 156676, 173792, 190908], "76-80": [164890, 184226, 196269, 207740, 230628, 253516], "81-85": [208424, 232819, 247250, 261681, 290543, 319405], "85+": [257219, 286390, 305141, 348273, 382404, 413069] } } }, 
        "Premier": { "SI": [500000, 700000, 1000000], "rates": { "1A": { "18-35": [13607, 14531, 15039], "36-45": [15168, 16371, 17046], "46-50": [18992, 20700, 21604], "51-55": [22019, 24267, 25484], "56-60": [27608, 30564, 32190], "61-65": [38370, 42598, 44981], "66-70": [54215, 60324, 63833], "71-75": [76945, 85757, 90893], "76-80": [105842, 118085, 125283], "81-85": [136461, 152318, 161650], "85+": [171276, 191218, 202929] }, "1A1C": { "18-35": [15019, 16435, 17248], "36-45": [16673, 18339, 19303], "46-50": [20731, 22841, 23996], "51-55": [26791, 29701, 31317], "56-60": [32211, 35758, 37744], "61-65": [41899, 46592, 49258], "66-70": [56163, 62548, 66228], "71-75": [77370, 86277, 91476], "76-80": [106656, 119046, 126336], "81-85": [137880, 153959, 163429], "85+": [172690, 192857, 204710] }, "1A2C": { "18-35": [16873, 18857, 20022], "36-45": [18853, 21085, 22398], "46-50": [23675, 26344, 27845], "51-55": [33166, 36938, 39074], "56-60": [38993, 43395, 45895], "61-65": [48574, 54108, 57282], "66-70": [62679, 69887, 74063], "71-75": [82914, 92527, 98152], "76-80": [108637, 121305, 128764], "81-85": [138564, 154769, 164319], "85+": [173463, 193771, 205716] }, "1A3C": { "18-35": [20266, 22805, 24313], "36-45": [22327, 25112, 26766], "46-50": [27341, 30556, 32396], "51-55": [39715, 44329, 46971], "56-60": [45621, 50858, 53861], "61-65": [55094, 61451, 65120], "66-70": [69042, 77053, 81713], "71-75": [89050, 99439, 105531], "76-80": [114485, 127895, 135801], "81-85": [141438, 158028, 167812], "85+": [173778, 194166, 206165] }, "2A": { "18-35": [18362, 19749, 20536], "36-45": [20871, 22666, 23696], "46-50": [26801, 29386, 30814], "51-55": [31678, 35052, 36936], "56-60": [40469, 44877, 47359], "61-65": [56194, 62460, 66047], "66-70": [79345, 88356, 93587], "71-75": [112554, 125510, 133117], "76-80": [154771, 172738, 183355], "81-85": [199513, 222755, 236488], "85+": [250391, 279598, 296804] }, "2A1C": { "18-35": [18615, 20456, 21523], "36-45": [21544, 23786, 25094], "46-50": [28456, 31477, 33174], "51-55": [36473, 40524, 42815], "56-60": [45766, 50835, 53716], "61-65": [61276, 68179, 72149], "66-70": [84111, 93721, 99313], "71-75": [116865, 130367, 138303], "76-80": [158505, 176949, 187854], "81-85": [202636, 226283, 240261], "85+": [252820, 282350, 299754] }, "2A2C": { "18-35": [19552, 21833, 23172], "36-45": [22784, 25461, 27037], "46-50": [30407, 33850, 35809], "51-55": [41271, 45978, 48664], "56-60": [50909, 56621, 59889], "61-65": [66205, 73724, 78066], "66-70": [88723, 98912, 104853], "71-75": [121024, 135050, 143303], "76-80": [162087, 180987, 192168], "81-85": [205607, 229638, 243848], "85+": [255096, 284928, 302517] }, "2A3C": { "18-35": [22028, 24736, 26339], "36-45": [25317, 28416, 30253], "46-50": [33080, 36932, 39145], "51-55": [46242, 51585, 54654], "56-60": [55899, 62233, 65876], "61-65": [70980, 79096, 83798], "66-70": [93182, 103930, 110209], "71-75": [125029, 139560, 148118], "76-80": [165515, 184852, 196296], "81-85": [208424, 232819, 247250], "85+": [257219, 287333, 305096] } } }, 
        "Platinum": { "SI": [1000000, 1500000, 2000000, 2500000, 3000000, 4000000, 5000000], "rates": { "1A": { "18-35": [19446, 20602, 21716, 22727, 24194, 25371, 25895], "36-45": [21031, 22647, 24108, 25431, 27123, 28601, 29333], "46-50": [24735, 27144, 29346, 31342, 33456, 35553, 36682], "51-55": [27705, 30791, 33610, 36167, 38675, 41267, 42683], "56-60": [33674, 37637, 41264, 44555, 47161, 50398, 52187], "61-65": [46883, 52843, 58027, 62726, 66211, 70778, 73462], "66-70": [66213, 75302, 82833, 89649, 94654, 101261, 105369], "71-75": [94007, 107768, 118718, 128617, 135841, 145452, 151702], "76-80": [129298, 148880, 164144, 177933, 187954, 201334, 210243], "81-85": [166421, 191393, 211008, 228736, 241558, 258603, 269907], "85+": [208375, 238745, 263100, 285135, 300988, 321892, 335523] }, "1A1C": { "18-35": [23125, 24921, 26579, 28081, 30024, 31874, 32676], "36-45": [24956, 27165, 29135, 30918, 33064, 35184, 36174], "46-50": [29261, 32173, 34810, 37199, 39719, 42397, 43743], "51-55": [36367, 40234, 43774, 46985, 50676, 54068, 55815], "56-60": [42319, 46977, 51243, 55115, 58853, 62826, 64907], "61-65": [54225, 60680, 66348, 71486, 76002, 81172, 84060], "66-70": [71629, 80899, 88679, 95724, 101608, 108613, 112782], "71-75": [96651, 110126, 120984, 130802, 138684, 148393, 154490], "76-80": [130869, 149962, 164996, 178582, 189177, 202541, 211200], "81-85": [168071, 192586, 211988, 229527, 242940, 259996, 271067], "85+": [211214, 241354, 265651, 287636, 304188, 325253, 338757] }, "1A2C": { "18-35": [25238, 27767, 30054, 32125, 34611, 37221, 38341], "36-45": [27608, 30546, 33141, 35491, 38177, 41055, 42360], "46-50": [33175, 36808, 40063, 43011, 46067, 49496, 51154], "51-55": [44918, 49837, 54329, 58403, 63437, 67839, 70033], "56-60": [51556, 57256, 62466, 67194, 72270, 77246, 79771], "61-65": [63332, 70809, 77405, 83386, 89230, 95389, 98711], "66-70": [80543, 90804, 99489, 107355, 114551, 122526, 127115], "71-75": [105288, 119707, 131435, 142044, 151217, 161865, 168360], "76-80": [136708, 156309, 171876, 185948, 197609, 211612, 220474], "81-85": [169763, 194161, 213600, 231177, 245331, 262596, 273590], "85+": [213102, 243185, 267553, 289605, 306927, 328248, 341704] }, "1A3C": { "18-35": [29442, 32687, 35589, 38216, 41231, 44585, 46015], "36-45": [31954, 35603, 38810, 41713, 44926, 48544, 50158], "46-50": [37856, 42190, 46050, 49544, 53122, 57285, 59248], "51-55": [53368, 59313, 64735, 69653, 76012, 81400, 84030], "56-60": [60161, 66878, 73010, 78574, 84971, 90926, 93884], "61-65": [71806, 80281, 87783, 94586, 101740, 108866, 112612], "66-70": [88824, 100052, 109619, 118286, 126778, 135699, 140697], "71-75": [113292, 128631, 141208, 152587, 163032, 174596, 181480], "76-80": [144361, 164823, 181196, 195998, 208904, 223786, 233009], "81-85": [177046, 202251, 222452, 240721, 256092, 274199, 285530], "85+": [213987, 243942, 268315, 290374, 308412, 329915, 343294] }, "2A": { "18-35": [26763, 28486, 30112, 31587, 34051, 35769, 36535], "36-45": [29451, 31845, 33978, 35911, 38702, 40860, 41929], "46-50": [35754, 39354, 42570, 45483, 48862, 51924, 53573], "51-55": [40837, 45425, 49541, 53274, 57228, 61012, 63080], "56-60": [50282, 56152, 61446, 66251, 70125, 74851, 77463], "61-65": [69662, 78447, 86015, 92875, 97963, 104631, 108551], "66-70": [97918, 111270, 122265, 132217, 139525, 149170, 155168], "71-75": [138541, 158714, 174701, 189153, 199701, 213733, 222858], "76-80": [190122, 218796, 241080, 261213, 275844, 295379, 308386], "81-85": [244397, 280939, 309576, 335459, 354179, 379065, 395569], "85+": [305747, 350169, 385728, 417898, 441045, 471565, 491466] }, "2A1C": { "18-35": [28016, 30324, 32452, 34381, 37278, 39605, 40624], "36-45": [31405, 34375, 37003, 39383, 42603, 45363, 46683], "46-50": [39349, 43507, 47202, 50550, 54349, 58000, 59891], "51-55": [48818, 54227, 59090, 63499, 68637, 73216, 75634], "56-60": [59129, 65803, 71827, 77294, 82341, 87850, 90803], "61-65": [78249, 87797, 96064, 103558, 109799, 117223, 121466], "66-70": [106120, 120172, 131819, 142362, 150793, 161154, 167447], "71-75": [146188, 166969, 183539, 198521, 210147, 224834, 234211], "76-80": [197065, 226230, 249011, 269596, 285250, 305364, 318571], "81-85": [250601, 287526, 316573, 342829, 362516, 387908, 404563], "85+": [311115, 355813, 391686, 424144, 448196, 479146, 499151] }, "2A2C": { "18-35": [28998, 31874, 34489, 36859, 40177, 43095, 44361], "36-45": [32898, 36427, 39535, 42349, 45987, 49331, 50893], "46-50": [42041, 46740, 50901, 54669, 58875, 63099, 65224], "51-55": [55447, 61653, 67238, 72304, 78608, 83960, 86716], "56-60": [66371, 73824, 80555, 86663, 92866, 99134, 102419], "61-65": [85230, 95517, 104460, 112567, 119945, 128101, 132657], "66-70": [112715, 127445, 139720, 150835, 160371, 171424, 178001], "71-75": [152229, 173593, 190724, 206215, 218903, 234222, 243841], "76-80": [202403, 232035, 255290, 276306, 292966, 313636, 327031], "81-85": [255198, 292483, 321917, 348526, 369162, 395038, 411833], "85+": [314877, 359826, 395992, 428717, 453658, 485013, 505113] }, "2A3C": { "18-35": [32071, 35499, 38587, 41384, 45111, 48602, 50107], "36-45": [36085, 40156, 43730, 46965, 51006, 54919, 56715], "46-50": [45498, 50722, 55334, 59510, 64110, 68889, 71241], "51-55": [61973, 68951, 75238, 80940, 88393, 94493, 97577], "56-60": [72980, 81187, 88604, 95333, 102675, 109679, 113284], "61-65": [91578, 102581, 112177, 120877, 129373, 138239, 143098], "66-70": [118678, 134060, 146942, 158608, 169232, 180953, 187805], "71-75": [157638, 179561, 197230, 213211, 226942, 242869, 252719], "76-80": [207108, 237182, 260890, 282317, 299964, 321168, 334741], "81-85": [259164, 296783, 326582, 353524, 375092, 401427, 418353], "85+": [318007, 363183, 399619, 432590, 458402, 490140, 510323] } } }, "PlatinumInfinite": { "SI": [5000000, 7500000, 10000000, 20000000], "rates": { "1A": { "18-35": [45944, 47220, 48152, 51518], "36-45": [46749, 48525, 49853, 54754], "46-50": [47859, 51876, 53984, 61893], "51-55": [48608, 53410, 56107, 66279], "56-60": [54676, 60499, 63962, 77071], "61-65": [76124, 84139, 89322, 109087], "66-70": [108259, 119669, 127549, 157761], "71-75": [154892, 171334, 183237, 229051], "76-80": [213830, 236566, 253484, 318740], "81-85": [274017, 302743, 324325, 407589], "85+": [340322, 375225, 401499, 502808] }, "1A1C": { "18-35": [47694, 49573, 50946, 55845], "36-45": [49657, 51987, 53716, 59996], "46-50": [53551, 58022, 60453, 69441], "51-55": [63163, 68756, 72022, 84207], "56-60": [70279, 76792, 80746, 95575], "61-65": [89592, 98077, 103580, 124399], "66-70": [118526, 130066, 137997, 168218], "71-75": [160512, 176581, 188132, 232395], "76-80": [217618, 239761, 256148, 319143], "81-85": [278010, 306172, 327244, 408330], "85+": [346401, 380973, 406926, 506787] }, "1A2C": { "18-35": [48222, 50934, 52914, 59941], "36-45": [50302, 53329, 55567, 63626], "46-50": [58174, 63332, 66265, 77001], "51-55": [77547, 84228, 88286, 103331], "56-60": [86882, 94471, 99211, 116871], "61-65": [105982, 115521, 121792, 145376], "66-70": [134595, 147157, 155828, 188709], "71-75": [176117, 193156, 205408, 252175], "76-80": [228595, 251236, 267952, 332022], "81-85": [282191, 310165, 331030, 411128], "85+": [350478, 385009, 410916, 510410] }, "1A3C": { "18-35": [53239, 56507, 58895, 67340], "36-45": [57381, 61089, 63825, 73621], "46-50": [66375, 72204, 75627, 88069], "51-55": [92953, 100695, 105527, 123366], "56-60": [102874, 111515, 117021, 137446], "61-65": [121760, 132329, 139350, 165631], "66-70": [150054, 163611, 173004, 208479], "71-75": [191111, 209096, 222029, 271234], "76-80": [243002, 266525, 283873, 350185], "81-85": [295999, 324794, 346246, 428406], "85+": [354391, 388622, 414202, 512242] }, "2A": { "18-35": [61568, 63430, 64790, 69706], "36-45": [63885, 66477, 68415, 75571], "46-50": [68114, 74646, 77723, 89271], "51-55": [71487, 79165, 83102, 97953], "56-60": [81884, 91053, 96108, 115248], "61-65": [113250, 125618, 133186, 162043], "66-70": [160234, 177559, 189064, 233174], "71-75": [228407, 253078, 270457, 337345], "76-80": [314571, 348431, 373132, 468406], "81-85": [402592, 445200, 476709, 598274], "85+": [499592, 551218, 589577, 737489] }, "2A1C": { "18-35": [62758, 65665, 67788, 75399], "36-45": [64308, 67701, 70227, 79465], "46-50": [70861, 77922, 81385, 94270], "51-55": [84201, 92726, 97280, 114352], "56-60": [97481, 113134, 107477, 134436], "61-65": [128421, 141572, 149706, 180593], "66-70": [174765, 192805, 204823, 250753], "71-75": [242008, 285105, 267294, 353501], "76-80": [326997, 361346, 386380, 482772], "81-85": [413820, 456797, 488545, 610869], "85+": [509502, 561372, 599877, 748186] }, "2A2C": { "18-35": [63261, 66997, 69726, 79465], "36-45": [64761, 68841, 71869, 82868], "46-50": [73368, 80943, 84779, 98959], "51-55": [95402, 104748, 109900, 129125], "56-60": [110788, 121585, 127824, 151221], "61-65": [141300, 155208, 163892, 196739], "66-70": [187004, 205734, 218246, 265928], "71-75": [253318, 279192, 297417, 367254], "76-80": [337133, 371945, 397292, 494735], "81-85": [422757, 466077, 498046, 621061], "85+": [517120, 569210, 607841, 756481] }, "2A3C": { "18-35": [63597, 67509, 70366, 80529], "36-45": [65094, 69286, 72392, 83615], "46-50": [79454, 87526, 91724, 107158], "51-55": [107623, 117766, 123498, 144808], "56-60": [123483, 135056, 141860, 167283], "61-65": [153569, 168209, 177422, 212163], "66-70": [198632, 218026, 231014, 280381], "71-75": [264017, 290455, 309075, 380285], "76-80": [346657, 381906, 407549, 505976], "81-85": [431084, 474721, 506891, 630531], "85+": [524127, 576411, 615150, 764053] } } } };

    // --- Benefits Mapping ---
    // (Truncated for brevity, full mapping remains same as previous)
    const benefitsMapping = {
        "Prime": [
            ["Room Rent", "Actual up to SI"],
            ["Pre/Post Expense", "60/90 Days"],
            ["Day Care Treatment", "Up to SI"],
            ["Domiciliary Hospitalization", "Actuals up to SI"],
            ["Home Health Care", "Actuals up to SI"],
            ["Emergency Road Ambulance", "Rs.3,000/Hospitalization"],
            ["Air Ambulance (Domestic)", "Up to Rs.2 Lacs"],
            ["Organ Donor Expense", "Actuals up to SI"],
            ["ReInsure Benefit", "Unlimited up to 100% of Base SI (Related and Unrelated illness both)"],
            ["Bariatric Surgery Cover", "Up to Rs.50,000"],
            ["Modern Treatment / Advance Procedures", "Actuals upto SI"],
            ["AYUSH", "Actuals up to SI"],
            ["Claim Shield", "Non-Payable items Paid up to SI"],
            ["Annual Health Check-up", "Up to Rs.2,500 (1st Renewal Onwards)"],
            ["Enhanced Cumulative Bonus", "50% of Base SI up to 100%"],
            ["Shared Accomodation Cash Benefit", "Rs.500 per day, Max. Rs.4,000"],
            ["Initial Waiting Period", "30 Days"],
            ["Hypertension, Diabetic, Cardiac Condition", "90 Days (if not Pre-Existing)"],
            ["Specific Disease Waiting Period", "2 Years"],
            ["Pre-Existing Waiting Period", "2 Years"],
        ],
        "Elite": [
            ["Room Rent", "Actual up to SI"],
            ["Health Multiplier", "2X (SI 5-10L) / 3X (SI 15L+)"],
            ["Pre/Post Expense", "60/90 Days"],
            ["Day Care Treatment", "Up to SI"],
            ["Domiciliary Hospitalization", "Actuals up to SI"],
            ["Home Health Care", "Actuals up to SI"],
            ["Emergency Road Ambulance", "Rs.3,000/Hospitalization"],
            ["Air Ambulance (Domestic)", "Up to Rs.2 Lacs"],
            ["Organ Donor Expense", "Actuals up to SI"],
            ["ReInsure Benefit", "Unlimited up to 100% of Base SI (Related and Unrelated illness both)"],
            ["Bariatric Surgery Cover", "Up to Rs.50,000"],
            ["Modern Treatment / Advance Procedures", "Actuals upto SI"],
            ["AYUSH", "Actuals up to SI"],
            ["Claim Shield", "Non-Payable items Paid up to SI"],
            ["Annual Health Check-up", "Up to Rs.2,500 (1st Renewal Onwards)"],
            ["Enhanced Cumulative Bonus", "50% of Base SI up to 100%"],
            ["Shared Accomodation Cash Benefit", "Rs.500 per day, Max. Rs.4,000"],
            ["Initial Waiting Period", "30 Days"],
            ["Hypertension, Diabetic, Cardiac Condition", "90 Days (if not Pre-Existing)"],
            ["Specific Disease Waiting Period", "2 Years"],
            ["Pre-Existing Waiting Period", "2 Years"],
        ],
        "Premier": [
            ["Room Rent", "Actual up to SI"],
            ["Health Multiplier", "2X of SI"],
            ["Pre/Post Expense", "60/90 Days"],
            ["Day Care Treatment", "Up to SI"],
            ["Maternity Expense", "Up to Rs.25k(Normal) / Rs.50k(C-Sec)"],
            ["New Born Baby Cover", "Up to Maternity SI"],
            ["Domiciliary Hospitalization", "Actuals up to SI"],
            ["Home Health Care", "Actuals up to SI"],
            ["Emergency Road Ambulance", "Rs.4,000/Hospitalization"],
            ["Air Ambulance (Domestic)", "Up to Rs.2 Lacs"],
            ["Organ Donor Expense", "Actuals up to SI"],
            ["ReInsure Benefit", "Unlimited up to 100% of Base SI (Related and Unrelated illness both)"],
            ["Bariatric Surgery Cover", "Up to Rs.50,000"],
            ["Modern Treatment / Advance Procedures", "Actuals upto SI"],
            ["AYUSH", "Actuals up to SI"],
            ["Recovery Benefit", "Rs.2,500"],
            ["Claim Shield", "Non-Payable items Paid up to SI"],
            ["Annual Health Check-up", "Up to Rs.2,500 (1st Renewal Onwards)"],
            ["Enhanced Cumulative Bonus", "50% of Base SI up to 100%"],
            ["Shared Accomodation Cash Benefit", "Rs.500 per day, Max. Rs.4,000"],
            ["Out-Patient and Prescribed Diagnostic Test", "Rs.5,000/Policy (Cancer Diagnosed Patients)"],
            ["Initial Waiting Period", "30 Days"],
            ["Hypertension, Diabetic, Cardiac Condition", "90 Days (if not Pre-Existing)"],
            ["Specific Disease Waiting Period", "2 Years"],
            ["Pre-Existing Waiting Period", "2 Years"],
            ["Maternity Waiting Period", "Single Adult - 48 Months , All Other Family Combination - 24 Months"],
        ],
        "Platinum": [
            ["Room Rent", "Actual up to SI"],
            ["Health Multiplier", "2X (SI-10L) / 3X (SI 15L+)"],
            ["Pre/Post Expense", "60/90 Days"],
            ["Day Care Treatment", "Up to SI"],
            ["Maternity Expense", "Up to Rs.50k(Normal) / Rs.75k(C-Sec)"],
            ["New Born Baby Cover", "Up to Maternity SI"],
            ["Child Vaccination", "Rs.5,000 Per Annum (Up to 12 Years of Age)"],
            ["Domiciliary Hospitalization", "Actuals up to SI"],
            ["Home Health Care", "Actuals up to SI"],
            ["Emergency Road Ambulance", "Rs.5,000/Hospitalization"],
            ["Air Ambulance (Domestic)", "Up to Rs.2 Lacs"],
            ["Organ Donor Expense", "Actuals up to SI"],
            ["ReInsure Benefit", "Unlimited up to 100% of Base SI (Related and Unrelated illness both)"],
            ["Bariatric Surgery Cover", "Up to Rs.2 Lacs"],
            ["Modern Treatment / Advance Procedures", "Actuals upto SI"],
            ["AYUSH", "Actuals up to SI"],
            ["Recovery Benefit", "Rs.5,000"],
            ["Claim Shield", "Non-Payable items Paid up to SI"],
            ["E-Opinion", "4-Per Member"],
            ["Annual Health Check-up", "Up to Rs.5,000 (Since Inception)"],
            ["Enhanced Cumulative Bonus", "50% of Base SI up to 200%"],
            ["Shared Accomodation Cash Benefit", "Rs.500 per day, Max. Rs.8,000"],
            ["Medical Treatment Abroad", "Actuals up to SI)"],
            ["Out-Patient (OPD) Cover", "Single Adult - Rs.5,000, All other Family Combination - Rs.10,000/Family"],
            ["Out-Patient and Prescribed Diagnostic Test", "Rs.10,000/Policy (Cancer Diagnosed Patients)"],
            ["Initial Waiting Period", "30 Days"],
            ["Hypertension, Diabetic, Cardiac Condition", "90 Days (if not Pre-Existing)"],
            ["Specific Disease Waiting Period", "1 Years"],
            ["Pre-Existing Waiting Period", "2 Years"],
            ["Maternity Waiting Period", "Single Adult - 48 Months , All Other Family Combination - 24 Months"],
            ["Medical Treatment Abroad Waiting Period", "36 Months"],
        ],
        "PlatinumInfinite": [
            ["Room Rent", "Actual up to SI"],
            ["Health Multiplier", "3X of SI"],
            ["Pre/Post Expense", "60/180 Days"],
            ["Day Care Treatment", "Up to SI"],
            ["Maternity Expense", "Up to 2 Lac"],
            ["New Born Baby Cover", "Up to Maternity SI"],
            ["Child Vaccination", "Rs.10,000 Per Annum (Up to 12 Years of Age)"],
            ["Domiciliary Hospitalization", "Actuals up to SI"],
            ["Home Health Care", "Actuals up to SI"],
            ["Emergency Road Ambulance", "Covered up to SI"],
            ["Air Ambulance (Domestic)", "Up to Rs.10 Lacs"],
            ["Organ Donor Expense", "Actuals up to SI"],
            ["ReInsure Benefit", "Unlimited up to 200% of Base SI (Related and Unrelated illness both)"],
            ["Bariatric Surgery Cover", "Up to Rs.2 Lacs"],
            ["Modern Treatment / Advance Procedures", "Actuals upto SI"],
            ["AYUSH", "Actuals up to SI"],
            ["Recovery Benefit", "Rs.10,000"],
            ["Claim Shield", "Non-Payable items Paid up to SI"],
            ["E-Opinion", "Unlimited"],
            ["Annual Health Check-up", "Up to Rs.10,000 (Since Inception)"],
            ["Loyalty Credit", "50% of Base SI up to 100% (SI Enhancement Irrespective of Claim)"],
            ["Shared Accomodation Cash Benefit", "Rs.1000 per day, Max. Rs.15,000"],
            ["Medical Treatment Abroad", "Actuals up to SI)"],
            ["Out-Patient (OPD) Cover", "Single Adult - Rs.10,000, All other Family Combination - Rs.20,000/Family"],
            ["Out-Patient (OPD) Dental/Vision Cover", "Rs.5,000/Family"],
            ["Out-Patient and Prescribed Diagnostic Test", "Rs.15,000/Policy (Cancer Diagnosed Patients)"],
            ["Initial Waiting Period", "30 Days"],
            ["Hypertension, Diabetic, Cardiac Condition", "90 Days (if not Pre-Existing)"],
            ["Specific Disease Waiting Period", "1 Years"],
            ["Pre-Existing Waiting Period", "2 Years"],
            ["Maternity Waiting Period", "Single Adult - 48 Months , All Other Family Combination - 24 Months"],
            ["Medical Treatment Abroad Waiting Period", "36 Months"],

        ]
    };

    // --- HELPER FUNCTIONS ---
    function getDomesticHelpRate(age, si) {
        if (age >= 18 && age <= 35) return si === 50000 ? 2085.5862 : 2404.7787;
        if (age >= 36 && age <= 45) return si === 50000 ? 2447.3377 : 2830.3687;
        if (age >= 46 && age <= 50) return si === 50000 ? 3449.7102 : 4009.6304;
        if (age >= 51 && age <= 55) return si === 50000 ? 4479.1630 : 5220.7514;
        if (age >= 56 && age <= 60) return si === 50000 ? 6438.8207 : 7421.0201;
        if (age >= 61 && age <= 65) return si === 50000 ? 8244.6635 : 9545.5411;
        if (age >= 66 && age <= 70) return si === 50000 ? 10636.4186 : 12359.3706;
        if (age >= 71 && age <= 75) return si === 50000 ? 13804.1872 : 16086.1573;
        if (age >= 76 && age <= 80) return si === 50000 ? 17999.7498 : 21022.1133;
        if (age >= 81 && age <= 85) return si === 50000 ? 23556.5778 : 27559.5579;
        if (age > 85) return si === 50000 ? 30916.3387 : 36218.1001;
        return 0;
    }

    function getReinsureCost(si, age) {
        let cost45, costAbove;
        if (si === 500000) { cost45=567.4155; costAbove=1361.7973; }
        else if (si === 700000) { cost45=400.8407; costAbove=962.0177; }
        else if (si === 1000000) { cost45=205.2521; costAbove=492.6051; }
        else if (si >= 1500000) { cost45=55.6846; costAbove=133.6431; } 
        else { return 0; } 
        return (age <= 45) ? cost45 : costAbove;
    }

    function getBonusSafeguardCost(si) {
        if (si === 500000) return 1080.2181;
        if (si === 700000) return 652.8781;
        if (si === 1000000) return 402.6491;
        if (si === 1500000) return 112.5650;
        if (si >= 2000000) return 27.9722; 
        return 0; 
    }

    function getAccidentHospitalizationCost(si) {
        if (si === 500000) return 55.2590;
        if (si === 700000) return 45.2124;
        if (si === 1000000) return 40.5400;
        if (si === 1500000) return 31.5415;
        if (si >= 2000000) return 26.3965; 
        return 0;
    }

    function getWellnessCost(variant) {
        if (variant === "Prime" || variant === "Elite" || variant === "Premier") return 1031.0;
        if (variant === "Platinum" || variant === "PlatinumInfinite") return 1417.0;
        return 0; 
    }

    // --- UI LOGIC ---
    function setPolicyType(type) {
        document.getElementById('policyType').value = type;
        document.getElementById('pill-individual').className = type === 'individual' ? 'pill-option active' : 'pill-option';
        document.getElementById('pill-floater').className = type === 'floater' ? 'pill-option active' : 'pill-option';

        const familySelect = document.getElementById('family');
        familySelect.innerHTML = '';

        if (type === 'individual') {
            addOption(familySelect, '1A', '1 Adult');
        } else {
            addOption(familySelect, '1A1C', '1 Adult + 1 Child');
            addOption(familySelect, '1A2C', '1 Adult + 2 Children');
            addOption(familySelect, '1A3C', '1 Adult + 3 Children');
            addOption(familySelect, '2A',   '2 Adults');
            addOption(familySelect, '2A1C', '2 Adults + 1 Child');
            addOption(familySelect, '2A2C', '2 Adults + 2 Children');
            addOption(familySelect, '2A3C', '2 Adults + 3 Children');
        }
        generateWellnessMemberCheckboxes(); 
    }

    function addOption(select, value, text) {
        const opt = document.createElement('option');
        opt.value = value;
        opt.text = text;
        select.add(opt);
    }

    function handleFamilyChange() {
        generateWellnessMemberCheckboxes();
    }

    function generateWellnessMemberCheckboxes() {
        const family = document.getElementById('family').value;
        const container = document.getElementById('wellness_inputs');
        container.innerHTML = '';

        let adults = 0;
        let children = 0;

        if (family === '1A') {
            adults = 1;
        } else {
            const matchA = family.match(/(\d+)A/);
            const matchC = family.match(/(\d+)C/);
            
            if (matchA) adults = parseInt(matchA[1]);
            if (matchC) children = parseInt(matchC[1]);
            
            if (!matchC && family.includes('2A')) {
                 if(family === '2A') { adults = 2; children = 0; }
            }
        }

        for(let i = 1; i <= adults; i++) {
            const div = document.createElement('div');
            div.className = 'member-item';
            div.innerHTML = `<label><input type="checkbox" class="wellness-member-check" value="Adult ${i}"> Adult ${i}</label>`;
            container.appendChild(div);
        }

        for(let i = 1; i <= children; i++) {
            const div = document.createElement('div');
            div.className = 'member-item';
            div.innerHTML = `<label><input type="checkbox" class="wellness-member-check" value="Child ${i}"> Child ${i}</label>`;
            container.appendChild(div);
        }
    }

    function handleVariantChange() {
        const variant = document.getElementById('variant').value;
        const siSelect = document.getElementById('sumInsured');
        siSelect.innerHTML = '';
        
        if (db[variant]) {
            db[variant].SI.forEach(val => {
                const opt = document.createElement('option');
                opt.value = val;
                opt.text = val.toLocaleString('en-IN');
                siSelect.add(opt);
            });
        }

        let defaultSI = "1000000"; 
        if (variant === "PlatinumInfinite") defaultSI = "10000000";

        let defaultIndex = 0;
        for(let i=0; i<siSelect.options.length; i++) {
            if(siSelect.options[i].value == defaultSI) {
                defaultIndex = i;
                break;
            }
        }
        siSelect.selectedIndex = defaultIndex;
        
        const reinsureCheck = document.getElementById('opt_reinsure');
        const reinsureLabel = document.getElementById('lbl_reinsure');
        const reinsureNote  = document.getElementById('reinsure_note');
        const bonusCheck    = document.getElementById('opt_bonus');
        const bonusLabel    = document.getElementById('lbl_bonus');
        const bonusNote     = document.getElementById('bonus_note');
        const wellnessCheck = document.getElementById('opt_wellness');
        const wellnessLabel = document.getElementById('lbl_wellness');
        const walkCheck     = document.getElementById('opt_walk');
        const walkLabel     = document.getElementById('lbl_walk');
        const walkNote      = document.getElementById('walk_note');
        
        if (variant === 'Prime' || variant === 'Elite' || variant === 'Premier' || variant === 'Platinum') {
            reinsureCheck.disabled = false;
            reinsureLabel.classList.remove('disabled');
            reinsureNote.style.display = 'none';
            bonusCheck.disabled = false;
            bonusLabel.classList.remove('disabled');
            bonusNote.style.display = 'none';
        } else {
            reinsureCheck.checked = false;
            reinsureCheck.disabled = true;
            reinsureLabel.classList.add('disabled');
            reinsureNote.style.display = 'block';
            bonusCheck.checked = false;
            bonusCheck.disabled = true;
            bonusLabel.classList.add('disabled');
            bonusNote.style.display = 'block';
        }
        wellnessCheck.disabled = false;
        wellnessLabel.classList.remove('disabled');

        // FIXED: WALK HEALTHY NOW ENABLED FOR PRIME TOO
        walkCheck.disabled = false;
        walkLabel.classList.remove('disabled');
        walkNote.style.display = 'none';
    }

    function getAgeBand(age) {
        if (age >= 18 && age <= 35) return '18-35';
        if (age >= 36 && age <= 45) return '36-45';
        if (age >= 46 && age <= 50) return '46-50';
        if (age >= 51 && age <= 55) return '51-55';
        if (age >= 56 && age <= 60) return '56-60';
        if (age >= 61 && age <= 65) return '61-65';
        if (age >= 66 && age <= 70) return '66-70';
        if (age >= 71 && age <= 75) return '71-75';
        if (age >= 76 && age <= 80) return '76-80';
        if (age >= 81 && age <= 85) return '81-85';
        if (age > 85) return '85+';
        return null;
    }

    // --- MATHEMATICAL CORE ---
    function getDerivedPremium(variant, family, ageBand, siIndex) {
        if (db[variant].rates[family] && db[variant].rates[family][ageBand]) {
            return parseFloat(db[variant].rates[family][ageBand][siIndex]);
        }
        const match = family.match(/(\d+)A(\d+)C/);
        if (!match) return 0;
        const adults = parseInt(match[1]);
        const children = parseInt(match[2]);
        const maxKnownChildren = 2; 
        const keyBase = adults + "A" + "1C";          
        const keyMaxKnown = adults + "A" + maxKnownChildren + "C"; 
        if (!db[variant].rates[keyBase] || !db[variant].rates[keyMaxKnown]) return 0; 
        const rateBase = parseFloat(db[variant].rates[keyBase][ageBand]?.[siIndex]);
        const rateMaxKnown = parseFloat(db[variant].rates[keyMaxKnown][ageBand]?.[siIndex]);
        if (!rateBase || !rateMaxKnown) return 0;
        const childDiff = rateMaxKnown - rateBase;
        const factor = (adults === 1) ? 0.88 : 0.70;
        const extraChildren = children - maxKnownChildren;
        let finalPremium = rateMaxKnown + (childDiff * factor * extraChildren);
        return finalPremium;
    }

    function getCombinedAnnualRateForAge(age, variant, family, si, siIndex) {
        const ageBand = getAgeBand(age);
        if(!ageBand) return null; 
        let base = getDerivedPremium(variant, family, ageBand, siIndex);
        let optional = 0;
        return { base, optional };
    }

    let currentQuote = null;

    function calculate() {
        const variant = document.getElementById('variant').value;
        const family = document.getElementById('family').value;
        const startAge = parseInt(document.getElementById('age').value);
        const si = parseInt(document.getElementById('sumInsured').value);
        const errorBox = document.getElementById('errorBox');
        const calcNote = document.getElementById('calcNote');
        
        errorBox.style.display = 'none';
        calcNote.innerText = "";
        document.getElementById('resultArea').style.display = 'none';
        document.getElementById('btnDownload').style.display = 'none';
        document.getElementById('btnWhatsapp').style.display = 'none';

        if (!startAge) {
            errorBox.innerText = "Please enter valid age.";
            errorBox.style.display = 'block';
            return;
        }

        const siIndex = db[variant].SI.indexOf(si);
        if (siIndex === -1) {
            errorBox.innerText = "Sum Insured not found.";
            errorBox.style.display = 'block';
            return;
        }

        let constantOptionalAnnual = 0.0;
        let selectedOptionalsList = [];

        // 1. Domestic Help (Variable Calculation)
        let hasDomestic = false;
        let staffAge = 0;
        let staffSi = 0;
        
        if (document.getElementById('opt_domestic').checked) {
            staffAge = parseInt(document.getElementById('staff_age').value);
            staffSi = parseInt(document.getElementById('staff_si').value);
            if(!staffAge) {
                errorBox.innerText = "Please enter staff age.";
                errorBox.style.display = 'block';
                return;
            }
            hasDomestic = true;
            // Add entry with variable cost flag
            selectedOptionalsList.push({
                name: "Domestic Help / Staff Cover", 
                cost: "variable",
                detail: `Covered (Base Age: ${staffAge}, SI: ${staffSi/1000}k)`
            });
        }

        // 2. Re-Insure (Variable)
        if (document.getElementById('opt_reinsure').checked && !document.getElementById('opt_reinsure').disabled) {
            selectedOptionalsList.push({
                name: "Enhanced Re-Insure Benefit", 
                cost: "variable",
                detail: "Unlimited up to 200%"
            });
        }

        // 3. Bonus Safeguard
        if (document.getElementById('opt_bonus').checked && !document.getElementById('opt_bonus').disabled) {
            let cost = getBonusSafeguardCost(si);
            constantOptionalAnnual += cost;
            selectedOptionalsList.push({
                name: "Enhanced Cumulative Bonus Safeguard", 
                cost: cost,
                detail: "Covered"
            });
        }

        // 4. Accident
        if (document.getElementById('opt_accident').checked) {
            let cost = getAccidentHospitalizationCost(si);
            constantOptionalAnnual += cost;
            selectedOptionalsList.push({
                name: "Additional Accidental Sum Insured", 
                cost: cost,
                detail: "2x of SI"
            });
        }

        // 5. Wellness Benefit
        if (document.getElementById('opt_wellness').checked && !document.getElementById('opt_wellness').disabled) {
            let ratePerHead = getWellnessCost(variant);
            const checkedMembers = document.querySelectorAll('.wellness-member-check:checked');
            const memberCount = checkedMembers.length;
            if (memberCount > 0) {
                let totalWellnessCost = ratePerHead * memberCount;
                constantOptionalAnnual += totalWellnessCost;
                selectedOptionalsList.push({
                    name: `Wellness (${memberCount} Members)`, 
                    cost: totalWellnessCost,
                    detail: `Covered`
                });
            }
        }
        
        // 6. Walk Healthy Benefit
        const isWalkSelected = document.getElementById('opt_walk').checked && !document.getElementById('opt_walk').disabled;
        if (isWalkSelected) {
            selectedOptionalsList.push({
                name: "Walk Healthy Benefit", 
                cost: "variable",
                detail: "Covered"
            });
        }

        const termDiscounts = [0, 0.04, 0.06]; 
        
        currentQuote = {
            variant: variant,
            family: family,
            age: startAge,
            si: si,
            selectedOptionals: selectedOptionalsList,
            results: []
        };

        for(let tenure = 1; tenure <= 3; tenure++) {
            let totalBaseForTenure = 0.0;
            let tenureOptionalTotal = 0.0; 
            let breakdownHTML = `<table class='breakdown-table'>`;
            let validCalculation = true;
            
            // 1. Base Premium Calculation
            breakdownHTML += `<tr class='bd-main-row'><td>Base Premium</td><td class='bd-val'></td></tr>`;
            
            // Dynamic Calculation Loop
            let walkTotal = 0;
            let reinsureTotal = 0;
            let domesticTotal = 0;
            let hasReinsure = document.getElementById('opt_reinsure').checked && !document.getElementById('opt_reinsure').disabled;

            for(let yr = 0; yr < tenure; yr++) {
                let currentAge = startAge + yr;
                let rates = getCombinedAnnualRateForAge(currentAge, variant, family, si, siIndex);
                if(!rates) { validCalculation = false; break; }
                
                let baseForThisYear = rates.base;
                totalBaseForTenure += baseForThisYear;
                breakdownHTML += `<tr class='bd-sub-row'><td>Year ${yr+1} (Age ${currentAge})</td><td class='bd-val'>₹ ${Math.round(baseForThisYear).toLocaleString('en-IN')}</td></tr>`;
            
                // Calculate Variable Optionals
                if (hasReinsure) {
                    reinsureTotal += getReinsureCost(si, currentAge);
                }
                if (isWalkSelected) {
                    walkTotal += (baseForThisYear * 0.10);
                }
                if (hasDomestic) {
                    // staffAge also increases by 'yr'
                    domesticTotal += getDomesticHelpRate(staffAge + yr, staffSi);
                }
            }
            
            if(!validCalculation) {
                document.getElementById(`total_${tenure}`).innerText = "N/A";
                continue;
            }

            // 2. Summing up Optionals
            if (selectedOptionalsList.length > 0) {
                 breakdownHTML += `<tr class='bd-main-row'><td>Optionals</td><td class='bd-val'></td></tr>`;
                 
                 selectedOptionalsList.forEach(opt => {
                     let itemTotal = 0;
                     if(opt.name.includes("Re-Insure")) {
                         itemTotal = reinsureTotal;
                     } else if(opt.name.includes("Walk Healthy")) {
                         itemTotal = walkTotal;
                     } else if(opt.name.includes("Domestic Help")) {
                         itemTotal = domesticTotal;
                     } else {
                         itemTotal = opt.cost * tenure;
                     }
                     tenureOptionalTotal += itemTotal;
                     breakdownHTML += `<tr class='bd-opt-row'><td>${opt.name}</td><td class='bd-val'>₹ ${Math.round(itemTotal).toLocaleString('en-IN')}</td></tr>`;
                 });
            }

            let grossPremium = totalBaseForTenure + tenureOptionalTotal;
            
            breakdownHTML += `<tr style='border-top:1px solid #ccc'><td style='font-weight:bold'>Gross Total</td><td class='bd-val' style='font-weight:bold'>₹ ${Math.round(grossPremium).toLocaleString('en-IN')}</td></tr>`;

            let discountRate = termDiscounts[tenure-1];
            let discountAmount = grossPremium * discountRate;
            
            if(discountRate > 0) {
                breakdownHTML += `<tr class='bd-discount-row'><td>Term Discount (${discountRate*100}%)</td><td class='bd-val'>- ₹ ${Math.round(discountAmount).toLocaleString('en-IN')}</td></tr>`;
            }
            
            breakdownHTML += `</table>`;
            document.getElementById(`breakdown_${tenure}`).innerHTML = breakdownHTML;

            let netPremium = grossPremium - discountAmount;
            let finalDisplay = Math.floor(netPremium);

            document.getElementById(`total_${tenure}`).innerText = "₹ " + finalDisplay.toLocaleString('en-IN');

            currentQuote.results.push({
                tenure: tenure + " Year(s)",
                base: Math.round(totalBaseForTenure),
                optional: Math.round(tenureOptionalTotal),
                discount: discountRate > 0 ? Math.round(discountAmount) : 0,
                final: finalDisplay
            });
        }
        
        calcNote.innerText = "Multi-year premiums account for age progression. GST not included.";
        document.getElementById('resultArea').style.display = 'block';
        document.getElementById('btnDownload').style.display = 'flex';
        document.getElementById('btnWhatsapp').style.display = 'flex';
    }

    document.getElementById('opt_domestic').addEventListener('change', function() {
        document.getElementById('domestic_inputs').style.display = this.checked ? 'block' : 'none';
    });
    
    document.getElementById('opt_wellness').addEventListener('change', function() {
        document.getElementById('wellness_members_container').style.display = this.checked ? 'block' : 'none';
    });

    // --- PDF GENERATION & SHARE ---
    async function generateAndAction(action) {
        if(!currentQuote) return;

        try {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            const primaryColor = [40, 0, 113];
            const secondaryColor = [0, 145, 208];

            doc.setFillColor(...primaryColor); 
            doc.rect(0, 0, 210, 15, 'F');
            
            doc.setTextColor(255, 255, 255);
            doc.setFont("helvetica", "bold");
            doc.setFontSize(14);
            doc.text("SBI Super Health Insurance - Premium Quote", 105, 10, null, null, "center");

            doc.setTextColor(0, 0, 0);
            doc.setFontSize(8);
            
            const startY = 25; 
            const leftCol = 14;
            const centerCol = 80;
            const rightCol = 145;
            const lineH = 4.5; 

            doc.setFont("helvetica", "bold");
            doc.text("Quote Details:", leftCol, startY);
            doc.setFont("helvetica", "normal");

            doc.text(`Variant: ${currentQuote.variant}`, leftCol, startY + lineH);
            doc.text(`Age of Eldest: ${currentQuote.age} Years`, centerCol, startY + lineH);
            doc.text(`Sum Insured: Rs. ${currentQuote.si.toLocaleString('en-IN')}`, rightCol, startY + lineH);

            doc.text(`Family Size: ${currentQuote.family}`, leftCol, startY + (lineH * 2));
            doc.text(`Policy Type: ${document.getElementById('policyType').value.toUpperCase()}`, centerCol, startY + (lineH * 2));
            
            let optCount = currentQuote.selectedOptionals.length;
            doc.text(`Opt. Benefits: ${optCount > 0 ? optCount + " Selected" : "None"}`, rightCol, startY + (lineH * 2));

            const premiumBody = currentQuote.results.map(row => [
                row.tenure,
                row.base.toLocaleString('en-IN'),
                row.optional.toLocaleString('en-IN'),
                row.discount > 0 ? "-" + row.discount.toLocaleString('en-IN') : "0",
                row.final.toLocaleString('en-IN')
            ]);

            doc.autoTable({
                startY: startY + (lineH * 3) + 2, 
                head: [['Tenure', 'Base Premium', 'Optionals', 'Discount', 'Net Premium(Rs.)']],
                body: premiumBody,
                theme: 'grid',
                headStyles: { 
                    fillColor: primaryColor, 
                    halign: 'center',
                    fontSize: 8,
                    cellPadding: 1.5 
                },
                styles: { 
                    fontSize: 8, 
                    halign: 'center',
                    cellPadding: 1.5 
                },
                columnStyles: { 4: { fontStyle: 'bold' } }
            });

            let nextY = doc.lastAutoTable.finalY + 5;

            if (currentQuote.selectedOptionals.length > 0) {
                doc.setFontSize(9);
                doc.setFont("helvetica", "bold");
                doc.setTextColor(40, 0, 113);
                doc.text("Selected Optional Benefits", 14, nextY);

                const optBody = currentQuote.selectedOptionals.map(opt => [opt.name, opt.detail]);

                doc.autoTable({
                    startY: nextY + 2,
                    head: [['Optional Benefit', 'Coverage Detail']],
                    body: optBody,
                    theme: 'grid',
                    tableLineColor: [200, 200, 200],
                    tableLineWidth: 0.1,
                    headStyles: { 
                        fillColor: secondaryColor,
                        fontSize: 8,
                        cellPadding: 1
                    },
                    styles: { 
                        fontSize: 7.5, 
                        cellPadding: 1, 
                        lineColor: [200, 200, 200],
                        lineWidth: 0.1,
                        valign: 'middle'
                    },
                    columnStyles: { 
                        0: { cellWidth: 60, fontStyle: 'bold' },
                        1: { cellWidth: 'auto' }
                    }
                });
                
                nextY = doc.lastAutoTable.finalY + 5;
            }
            
            doc.setFontSize(9);
            doc.setFont("helvetica", "bold");
            doc.setTextColor(40, 0, 113);
            doc.text(`Plan Benefits - ${currentQuote.variant}`, 14, nextY);
            
            const benefitData = benefitsMapping[currentQuote.variant];
            
            doc.autoTable({
                startY: nextY + 2,
                head: [['Benefit', 'Coverage Detail']],
                body: benefitData,
                theme: 'grid',
                tableLineColor: [200, 200, 200], 
                tableLineWidth: 0.1,
                headStyles: { 
                    fillColor: secondaryColor,
                    fontSize: 8,
                    cellPadding: 1
                },
                styles: { 
                    fontSize: 7, 
                    cellPadding: 0.8,
                    overflow: 'linebreak',
                    valign: 'middle',
                    lineColor: [200, 200, 200],
                    lineWidth: 0.1
                },
                columnStyles: { 
                    0: { cellWidth: 60, fontStyle: 'bold' },
                    1: { cellWidth: 'auto' }
                },
                pageBreak: 'auto' 
            });

            const pageHeight = doc.internal.pageSize.height;
            doc.setFontSize(7);
            doc.setTextColor(120);
            doc.setFont("helvetica", "italic");
            doc.text("Disclaimer: Quote for illustrative purposes only. Final premium subject to underwriting and GST.", 105, pageHeight - 5, null, null, "center");

            if(action === 'download') {
                doc.save("SBI_Super_Health_Quote.pdf");
            } else if(action === 'whatsapp') {
                const pdfBlob = doc.output('blob');
                const file = new File([pdfBlob], "SBI_Health_Quote.pdf", { type: "application/pdf" });

                if (navigator.canShare && navigator.canShare({ files: [file] })) {
                    try {
                        await navigator.share({
                            files: [file],
                            title: 'SBI Health Insurance Quote',
                            text: 'Here is the requested SBI Super Health Insurance premium quote.'
                        });
                    } catch (err) {
                        console.log('Share canceled', err);
                    }
                } else {
                    alert("Sharing not supported on this browser. Downloading file instead.");
                    doc.save("SBI_Super_Health_Quote.pdf");
                }
            }

        } catch (e) {
            alert("Error generating PDF. Please ensure internet connection to load PDF libraries.");
            console.error(e);
        }
    }

    window.onload = function() {
        setPolicyType('individual');
        handleVariantChange();
    };

</script>

</body>
</html>
